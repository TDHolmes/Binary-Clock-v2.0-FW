\hypertarget{_u_a_r_t_8c}{}\section{firmware/\+U\+A\+RT.c File Reference}
\label{_u_a_r_t_8c}\index{firmware/\+U\+A\+R\+T.\+c@{firmware/\+U\+A\+R\+T.\+c}}


High level U\+A\+RT functions to interface with lower level U\+A\+RT driver functions.  


{\ttfamily \#include \char`\"{}U\+A\+R\+T\+\_\+drvr\+\_\+4313.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}global\+\_\+defines.\+h\char`\"{}}\newline
{\ttfamily \#include $<$avr/interrupt.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_u_a_r_t_8c_a821ba6a21f4896a9a815940bfcf5d45c}{U\+A\+R\+T\+\_\+init} (uint32\+\_\+t baudrate)
\item 
void \hyperlink{_u_a_r_t_8c_af1ad6f713188977601a8b549503dce78}{U\+A\+R\+T\+\_\+transmit} (uint8\+\_\+t $\ast$data\+\_\+to\+\_\+tx\+\_\+ptr, uint8\+\_\+t len, \hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t} blocking)
\item 
void \hyperlink{_u_a_r_t_8c_a24bb26011d768b44f3a13bf603a001dd}{U\+A\+R\+T\+\_\+transmit\+\_\+byte} (uint8\+\_\+t data\+\_\+to\+\_\+tx, \hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t} blocking)
\item 
void \hyperlink{_u_a_r_t_8c_a1df5cfe5675bf1f123342d5a1bb33839}{U\+A\+R\+T\+\_\+transmit\+\_\+value} (int32\+\_\+t var\+\_\+to\+\_\+tx, \hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t} blocking, \hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t} print\+\_\+hex)
\item 
void \hyperlink{_u_a_r_t_8c_af7904ba62c8456c9bcd5f6b84adcb262}{U\+A\+R\+T\+\_\+receive} (uint8\+\_\+t $\ast$receive\+\_\+buffer\+\_\+ptr, uint8\+\_\+t len)
\item 
\hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} \hyperlink{_u_a_r_t_8c_adfbd65b23d278104fe4581479add9892}{U\+A\+R\+T\+\_\+receive\+\_\+byte} (uint8\+\_\+t $\ast$data\+\_\+to\+\_\+rx\+\_\+ptr, \hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t} blocking)
\item 
uint8\+\_\+t \hyperlink{_u_a_r_t_8c_a18b6dfda0347576121145e7becc02551}{U\+A\+R\+T\+\_\+receive\+\_\+unread\+\_\+items} (void)
\item 
\hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t} \hyperlink{_u_a_r_t_8c_a83d6a7e3709e9391c448a48413f4722a}{U\+A\+R\+T\+\_\+receive\+\_\+has\+\_\+data} (void)
\item 
void \hyperlink{_u_a_r_t_8c_a36d020619148935e3836fbfe85a5e6fb}{U\+A\+R\+T\+\_\+reset} (void)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
High level U\+A\+RT functions to interface with lower level U\+A\+RT driver functions. 



\subsection{Function Documentation}
\hypertarget{_u_a_r_t_8c_a821ba6a21f4896a9a815940bfcf5d45c}{}\label{_u_a_r_t_8c_a821ba6a21f4896a9a815940bfcf5d45c} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+init@{U\+A\+R\+T\+\_\+init}}
\index{U\+A\+R\+T\+\_\+init@{U\+A\+R\+T\+\_\+init}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+init()}{UART\_init()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+init (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{baudrate }\end{DoxyParamCaption})}

Initializes the U\+A\+RT module at the given baudrate.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em baudrate} & (uint32\+\_\+t)\+: baudrate to setup the U\+A\+RT module to. \\
\hline
\end{DoxyParams}
\hypertarget{_u_a_r_t_8c_af7904ba62c8456c9bcd5f6b84adcb262}{}\label{_u_a_r_t_8c_af7904ba62c8456c9bcd5f6b84adcb262} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+receive@{U\+A\+R\+T\+\_\+receive}}
\index{U\+A\+R\+T\+\_\+receive@{U\+A\+R\+T\+\_\+receive}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+receive()}{UART\_receive()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+receive (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{receive\+\_\+buffer\+\_\+ptr,  }\item[{uint8\+\_\+t}]{len }\end{DoxyParamCaption})}

Receives N values from the U\+A\+RT driver. Inherently blocks until it receives all values requested.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em receive\+\_\+buffer\+\_\+ptr} & (uint8\+\_\+t $\ast$)\+: location to receive the bytes into \\
\hline
\mbox{\tt in}  & {\em len} & (uint8\+\_\+t)\+: number of bytes to receive \\
\hline
\end{DoxyParams}
\hypertarget{_u_a_r_t_8c_adfbd65b23d278104fe4581479add9892}{}\label{_u_a_r_t_8c_adfbd65b23d278104fe4581479add9892} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+receive\+\_\+byte@{U\+A\+R\+T\+\_\+receive\+\_\+byte}}
\index{U\+A\+R\+T\+\_\+receive\+\_\+byte@{U\+A\+R\+T\+\_\+receive\+\_\+byte}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+receive\+\_\+byte()}{UART\_receive\_byte()}}
{\footnotesize\ttfamily \hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} U\+A\+R\+T\+\_\+receive\+\_\+byte (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{data\+\_\+to\+\_\+rx\+\_\+ptr,  }\item[{\hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t}}]{blocking }\end{DoxyParamCaption})}

Receives a byte from the U\+A\+RT driver.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data\+\_\+to\+\_\+rx\+\_\+ptr} & (uint8\+\_\+t $\ast$)\+: location to receive the byte to. \\
\hline
\mbox{\tt in}  & {\em blocking} & (bool\+\_\+t)\+: blocks until a valid byte is received. \\
\hline
\mbox{\tt out}  & {\em retval} & (retval\+\_\+t)\+: returns success/failure of receiving a byte. \\
\hline
\end{DoxyParams}
\hypertarget{_u_a_r_t_8c_a83d6a7e3709e9391c448a48413f4722a}{}\label{_u_a_r_t_8c_a83d6a7e3709e9391c448a48413f4722a} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+receive\+\_\+has\+\_\+data@{U\+A\+R\+T\+\_\+receive\+\_\+has\+\_\+data}}
\index{U\+A\+R\+T\+\_\+receive\+\_\+has\+\_\+data@{U\+A\+R\+T\+\_\+receive\+\_\+has\+\_\+data}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+receive\+\_\+has\+\_\+data()}{UART\_receive\_has\_data()}}
{\footnotesize\ttfamily \hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t} U\+A\+R\+T\+\_\+receive\+\_\+has\+\_\+data (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

returns if any bytes have been received by the U\+A\+RT driver.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em has\+\_\+data} & (bool\+\_\+t)\+: true if we have bytes received, false if none. \\
\hline
\end{DoxyParams}
\hypertarget{_u_a_r_t_8c_a18b6dfda0347576121145e7becc02551}{}\label{_u_a_r_t_8c_a18b6dfda0347576121145e7becc02551} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+receive\+\_\+unread\+\_\+items@{U\+A\+R\+T\+\_\+receive\+\_\+unread\+\_\+items}}
\index{U\+A\+R\+T\+\_\+receive\+\_\+unread\+\_\+items@{U\+A\+R\+T\+\_\+receive\+\_\+unread\+\_\+items}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+receive\+\_\+unread\+\_\+items()}{UART\_receive\_unread\_items()}}
{\footnotesize\ttfamily uint8\+\_\+t U\+A\+R\+T\+\_\+receive\+\_\+unread\+\_\+items (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

returns how many bytes have been received by the U\+A\+RT driver.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em unread\+\_\+items} & (uint8\+\_\+t)\+: number of valid bytes received by the U\+A\+RT module. \\
\hline
\end{DoxyParams}
\hypertarget{_u_a_r_t_8c_a36d020619148935e3836fbfe85a5e6fb}{}\label{_u_a_r_t_8c_a36d020619148935e3836fbfe85a5e6fb} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+reset@{U\+A\+R\+T\+\_\+reset}}
\index{U\+A\+R\+T\+\_\+reset@{U\+A\+R\+T\+\_\+reset}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+reset()}{UART\_reset()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+reset (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

clears hardware errors and flushes the U\+A\+RT received buffer. \hypertarget{_u_a_r_t_8c_af1ad6f713188977601a8b549503dce78}{}\label{_u_a_r_t_8c_af1ad6f713188977601a8b549503dce78} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+transmit@{U\+A\+R\+T\+\_\+transmit}}
\index{U\+A\+R\+T\+\_\+transmit@{U\+A\+R\+T\+\_\+transmit}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+transmit()}{UART\_transmit()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+transmit (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{data\+\_\+to\+\_\+tx\+\_\+ptr,  }\item[{uint8\+\_\+t}]{len,  }\item[{\hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t}}]{blocking }\end{DoxyParamCaption})}

Transmits N bytes via U\+A\+RT (either blocking or non-\/blocking).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data\+\_\+to\+\_\+tx\+\_\+ptr} & (uint8\+\_\+t $\ast$)\+: location of the data to transmit. \\
\hline
\mbox{\tt in}  & {\em len} & (uint8\+\_\+t)\+: number of bytes to transmit. \\
\hline
\mbox{\tt in}  & {\em blocking} & (bool\+\_\+t)\+: whether or not to blocking send each byte. \\
\hline
\end{DoxyParams}
\hypertarget{_u_a_r_t_8c_a24bb26011d768b44f3a13bf603a001dd}{}\label{_u_a_r_t_8c_a24bb26011d768b44f3a13bf603a001dd} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+transmit\+\_\+byte@{U\+A\+R\+T\+\_\+transmit\+\_\+byte}}
\index{U\+A\+R\+T\+\_\+transmit\+\_\+byte@{U\+A\+R\+T\+\_\+transmit\+\_\+byte}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+transmit\+\_\+byte()}{UART\_transmit\_byte()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+transmit\+\_\+byte (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{data\+\_\+to\+\_\+tx,  }\item[{\hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t}}]{blocking }\end{DoxyParamCaption})}

Transmits 1 byte via U\+A\+RT (either blocking or non-\/blocking).


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data\+\_\+to\+\_\+tx} & (uint8\+\_\+t)\+: data to transmit. \\
\hline
\mbox{\tt in}  & {\em blocking} & (bool\+\_\+t)\+: whether or not to blocking send the byte. \\
\hline
\end{DoxyParams}
\hypertarget{_u_a_r_t_8c_a1df5cfe5675bf1f123342d5a1bb33839}{}\label{_u_a_r_t_8c_a1df5cfe5675bf1f123342d5a1bb33839} 
\index{U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}!U\+A\+R\+T\+\_\+transmit\+\_\+value@{U\+A\+R\+T\+\_\+transmit\+\_\+value}}
\index{U\+A\+R\+T\+\_\+transmit\+\_\+value@{U\+A\+R\+T\+\_\+transmit\+\_\+value}!U\+A\+R\+T.\+c@{U\+A\+R\+T.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+transmit\+\_\+value()}{UART\_transmit\_value()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+transmit\+\_\+value (\begin{DoxyParamCaption}\item[{int32\+\_\+t}]{var\+\_\+to\+\_\+tx,  }\item[{\hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t}}]{blocking,  }\item[{\hyperlink{global__defines_8h_a04dd5074964518403bf944f2b240a5f8}{bool\+\_\+t}}]{print\+\_\+hex }\end{DoxyParamCaption})}

Transmits a value via U\+A\+RT (either blocking or non-\/blocking) encoded into A\+S\+C\+II. N\+O\+TE\+: you must cast your variable to an int32\+\_\+t for this to work properly.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em var\+\_\+to\+\_\+tx} & (uint32\+\_\+t)\+: variable to transmit in A\+S\+C\+II encoding. \\
\hline
\mbox{\tt in}  & {\em blocking} & (bool\+\_\+t)\+: whether or not to blocking send each byte. \\
\hline
\mbox{\tt in}  & {\em print\+\_\+hex} & (bool\+\_\+t)\+: whether or not to print in hexadecimal. \\
\hline
\end{DoxyParams}
