\hypertarget{i2c_8c}{}\section{firmware/i2c.c File Reference}
\label{i2c_8c}\index{firmware/i2c.\+c@{firmware/i2c.\+c}}
{\ttfamily \#include \char`\"{}i2c.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}i2c\+\_\+drvr\+\_\+4313.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}global\+\_\+defines.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{i2c_8c_a63ac36b9e7738f8045152703b0d12610}{W\+R\+I\+T\+E\+\_\+\+M\+A\+SK}~0x00
\begin{DoxyCompactList}\small\item\em Mask for writing to a chip. \end{DoxyCompactList}\item 
\#define \hyperlink{i2c_8c_af8fe54f90634a968e3d728abf1ac87a1}{R\+E\+A\+D\+\_\+\+M\+A\+SK}~0x01
\begin{DoxyCompactList}\small\item\em Mask for reading from a chip. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} \hyperlink{i2c_8c_a179335d191b4a62f55f6534fd3706964}{i2c\+\_\+init} (void)
\item 
\hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} \hyperlink{i2c_8c_a0be5140cb205508b6eca8e8d3bd2042e}{i2c\+\_\+write\+\_\+byte} (uint8\+\_\+t chip\+\_\+addr, uint8\+\_\+t reg\+\_\+addr, uint8\+\_\+t data)
\item 
\hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} \hyperlink{i2c_8c_a31a726b3ac4b29d6422b303b3e8e89b4}{i2c\+\_\+write} (uint8\+\_\+t chip\+\_\+addr, uint8\+\_\+t start\+\_\+adr, uint8\+\_\+t $\ast$data\+\_\+to\+\_\+write\+\_\+ptr, uint8\+\_\+t data\+\_\+len)
\item 
\hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} \hyperlink{i2c_8c_a1b26df225ca26b8849684b99868a7d9c}{i2c\+\_\+read\+\_\+byte} (uint8\+\_\+t chip\+\_\+addr, uint8\+\_\+t start\+\_\+adr, uint8\+\_\+t $\ast$data\+\_\+out\+\_\+ptr)
\item 
\hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} \hyperlink{i2c_8c_a0e9eaa90696291daa732848da63beef8}{i2c\+\_\+read} (uint8\+\_\+t chip\+\_\+addr, uint8\+\_\+t start\+\_\+adr, uint8\+\_\+t $\ast$data\+\_\+out\+\_\+ptr, uint8\+\_\+t data\+\_\+len)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{i2c_8c_af8fe54f90634a968e3d728abf1ac87a1}{}\label{i2c_8c_af8fe54f90634a968e3d728abf1ac87a1} 
\index{i2c.\+c@{i2c.\+c}!R\+E\+A\+D\+\_\+\+M\+A\+SK@{R\+E\+A\+D\+\_\+\+M\+A\+SK}}
\index{R\+E\+A\+D\+\_\+\+M\+A\+SK@{R\+E\+A\+D\+\_\+\+M\+A\+SK}!i2c.\+c@{i2c.\+c}}
\subsubsection{\texorpdfstring{R\+E\+A\+D\+\_\+\+M\+A\+SK}{READ\_MASK}}
{\footnotesize\ttfamily \#define R\+E\+A\+D\+\_\+\+M\+A\+SK~0x01}



Mask for reading from a chip. 



Definition at line 7 of file i2c.\+c.

\hypertarget{i2c_8c_a63ac36b9e7738f8045152703b0d12610}{}\label{i2c_8c_a63ac36b9e7738f8045152703b0d12610} 
\index{i2c.\+c@{i2c.\+c}!W\+R\+I\+T\+E\+\_\+\+M\+A\+SK@{W\+R\+I\+T\+E\+\_\+\+M\+A\+SK}}
\index{W\+R\+I\+T\+E\+\_\+\+M\+A\+SK@{W\+R\+I\+T\+E\+\_\+\+M\+A\+SK}!i2c.\+c@{i2c.\+c}}
\subsubsection{\texorpdfstring{W\+R\+I\+T\+E\+\_\+\+M\+A\+SK}{WRITE\_MASK}}
{\footnotesize\ttfamily \#define W\+R\+I\+T\+E\+\_\+\+M\+A\+SK~0x00}



Mask for writing to a chip. 



Definition at line 6 of file i2c.\+c.



\subsection{Function Documentation}
\hypertarget{i2c_8c_a179335d191b4a62f55f6534fd3706964}{}\label{i2c_8c_a179335d191b4a62f55f6534fd3706964} 
\index{i2c.\+c@{i2c.\+c}!i2c\+\_\+init@{i2c\+\_\+init}}
\index{i2c\+\_\+init@{i2c\+\_\+init}!i2c.\+c@{i2c.\+c}}
\subsubsection{\texorpdfstring{i2c\+\_\+init()}{i2c\_init()}}
{\footnotesize\ttfamily \hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} i2c\+\_\+init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Initializes the I2C driver.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em retval} & (retval\+\_\+t)\+: Returns the initialization status of the I2C driver. \\
\hline
\end{DoxyParams}


Definition at line 20 of file i2c.\+c.

\hypertarget{i2c_8c_a0e9eaa90696291daa732848da63beef8}{}\label{i2c_8c_a0e9eaa90696291daa732848da63beef8} 
\index{i2c.\+c@{i2c.\+c}!i2c\+\_\+read@{i2c\+\_\+read}}
\index{i2c\+\_\+read@{i2c\+\_\+read}!i2c.\+c@{i2c.\+c}}
\subsubsection{\texorpdfstring{i2c\+\_\+read()}{i2c\_read()}}
{\footnotesize\ttfamily \hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} i2c\+\_\+read (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{chip\+\_\+addr,  }\item[{uint8\+\_\+t}]{start\+\_\+adr,  }\item[{uint8\+\_\+t $\ast$}]{data\+\_\+out\+\_\+ptr,  }\item[{uint8\+\_\+t}]{data\+\_\+len }\end{DoxyParamCaption})}

Reads N bytes from a chip. Handles starting and stopping of communication.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em chip\+\_\+addr} & (uint8\+\_\+t)\+: The address of the chip to be read from. \\
\hline
\mbox{\tt in}  & {\em start\+\_\+adr} & (uint8\+\_\+t)\+: The starting register of the read. \\
\hline
\mbox{\tt in}  & {\em data\+\_\+out\+\_\+ptr} & (uint8\+\_\+t $\ast$)\+: Location to store the read values. \\
\hline
\mbox{\tt in}  & {\em data\+\_\+len} & (uint8\+\_\+t)\+: amount of bytes to read. \\
\hline
\mbox{\tt out}  & {\em retval} & (retval\+\_\+t)\+: Returns the success or failure of starting communication \& reading the byte. \\
\hline
\end{DoxyParams}


Definition at line 174 of file i2c.\+c.

\hypertarget{i2c_8c_a1b26df225ca26b8849684b99868a7d9c}{}\label{i2c_8c_a1b26df225ca26b8849684b99868a7d9c} 
\index{i2c.\+c@{i2c.\+c}!i2c\+\_\+read\+\_\+byte@{i2c\+\_\+read\+\_\+byte}}
\index{i2c\+\_\+read\+\_\+byte@{i2c\+\_\+read\+\_\+byte}!i2c.\+c@{i2c.\+c}}
\subsubsection{\texorpdfstring{i2c\+\_\+read\+\_\+byte()}{i2c\_read\_byte()}}
{\footnotesize\ttfamily \hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} i2c\+\_\+read\+\_\+byte (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{chip\+\_\+addr,  }\item[{uint8\+\_\+t}]{start\+\_\+adr,  }\item[{uint8\+\_\+t $\ast$}]{data\+\_\+out\+\_\+ptr }\end{DoxyParamCaption})}

Reads a byte from a chip. Handles starting and stopping of communication.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em chip\+\_\+addr} & (uint8\+\_\+t)\+: The address of the chip to be read from. \\
\hline
\mbox{\tt in}  & {\em start\+\_\+adr} & (uint8\+\_\+t)\+: The starting register of the read. \\
\hline
\mbox{\tt in}  & {\em data\+\_\+out\+\_\+ptr} & (uint8\+\_\+t $\ast$)\+: Location to store the read value. \\
\hline
\mbox{\tt out}  & {\em retval} & (retval\+\_\+t)\+: Returns the success or failure of starting communication \& reading the byte. \\
\hline
\end{DoxyParams}


Definition at line 129 of file i2c.\+c.

\hypertarget{i2c_8c_a31a726b3ac4b29d6422b303b3e8e89b4}{}\label{i2c_8c_a31a726b3ac4b29d6422b303b3e8e89b4} 
\index{i2c.\+c@{i2c.\+c}!i2c\+\_\+write@{i2c\+\_\+write}}
\index{i2c\+\_\+write@{i2c\+\_\+write}!i2c.\+c@{i2c.\+c}}
\subsubsection{\texorpdfstring{i2c\+\_\+write()}{i2c\_write()}}
{\footnotesize\ttfamily \hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} i2c\+\_\+write (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{chip\+\_\+addr,  }\item[{uint8\+\_\+t}]{start\+\_\+adr,  }\item[{uint8\+\_\+t $\ast$}]{data\+\_\+to\+\_\+write\+\_\+ptr,  }\item[{uint8\+\_\+t}]{data\+\_\+len }\end{DoxyParamCaption})}

Starts communication with a chip and writes N bytes to the chip. Handles starting and ending communication as well.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em chip\+\_\+addr} & (uint8\+\_\+t)\+: The address of the chip to be written to. \\
\hline
\mbox{\tt in}  & {\em start\+\_\+adr} & (uint8\+\_\+t)\+: The starting register of the write. \\
\hline
\mbox{\tt in}  & {\em data\+\_\+to\+\_\+write\+\_\+ptr} & (uint8\+\_\+t $\ast$)\+: The data to be written array. \\
\hline
\mbox{\tt in}  & {\em data\+\_\+len} & (uint8\+\_\+t)\+: How many bytes to be written. \\
\hline
\mbox{\tt out}  & {\em retval} & (retval\+\_\+t)\+: Returns the success or failure of starting communication and writing to the device. \\
\hline
\end{DoxyParams}


Definition at line 91 of file i2c.\+c.

\hypertarget{i2c_8c_a0be5140cb205508b6eca8e8d3bd2042e}{}\label{i2c_8c_a0be5140cb205508b6eca8e8d3bd2042e} 
\index{i2c.\+c@{i2c.\+c}!i2c\+\_\+write\+\_\+byte@{i2c\+\_\+write\+\_\+byte}}
\index{i2c\+\_\+write\+\_\+byte@{i2c\+\_\+write\+\_\+byte}!i2c.\+c@{i2c.\+c}}
\subsubsection{\texorpdfstring{i2c\+\_\+write\+\_\+byte()}{i2c\_write\_byte()}}
{\footnotesize\ttfamily \hyperlink{global__defines_8h_a7a53c0a65d763442224ca36299adee75}{retval\+\_\+t} i2c\+\_\+write\+\_\+byte (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{chip\+\_\+addr,  }\item[{uint8\+\_\+t}]{reg\+\_\+addr,  }\item[{uint8\+\_\+t}]{data }\end{DoxyParamCaption})}

Writes a byte to a chip. Handles starting and stopping of communication.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em chip\+\_\+addr} & (uint8\+\_\+t)\+: The chip\textquotesingle{}s address without the read/write bit set. \\
\hline
\mbox{\tt in}  & {\em reg\+\_\+addr} & (uint8\+\_\+t)\+: Address of the register you want to write to. \\
\hline
\mbox{\tt in}  & {\em data} & (uint8\+\_\+t)\+: Data you want to write. \\
\hline
\mbox{\tt out}  & {\em retval} & (retval\+\_\+t)\+: Returns the success or failure of starting communication \& sending the byte. \\
\hline
\end{DoxyParams}


Definition at line 60 of file i2c.\+c.

